<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YÃ¶netim Paneli</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 1rem;
      color: #333;
    }

    .panel-container {
      max-width: 700px;
      margin: 2rem auto;
      background: #ffffff;
      padding: 1.5rem;
      border-radius: 8px;
      box-shadow: 0 2px 15px rgba(0,0,0,0.08);
      /* Paneli varsayÄ±lan olarak gizli tutarÄ±z */
      display: none; /* Bu satÄ±rÄ± kaldÄ±rarak paneli admin.html aÃ§Ä±ldÄ±ÄŸÄ±nda hep gÃ¶rÃ¼nÃ¼r yapabilirsiniz. */
    }

    .panel-container h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 1px solid #eee;
        padding-bottom: 0.8rem;
        margin-bottom: 1.5rem;
    }

    .panel-container label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: #555;
    }

    .panel-container input[type="text"],
    .panel-container input[type="url"],
    .panel-container input[type="number"],
    .panel-container textarea {
      width: calc(100% - 20px);
      padding: 10px;
      margin-bottom: 1rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
    }

    .panel-container textarea {
      min-height: 100px;
      resize: vertical;
    }

    .panel-container button {
      background-color: #28a745; /* Sadece kaydet butonu olduÄŸu iÃ§in direkt yeÅŸil */
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      transition: background-color 0.2s ease;
      float: right; /* SaÄŸa hizala */
    }

    .panel-container button:hover {
      background-color: #218838;
    }

    .panel-container::after { /* Float temizleme */
      content: "";
      display: table;
      clear: both;
    }

    #message {
        display: none; /* SweetAlert kullanÄ±ldÄ±ÄŸÄ± iÃ§in bu divi gizli tutuyoruz */
    }
  </style>
</head>
<body>

  <div class="panel-container" id="adminPanel">
    <h2>AyarlarÄ± YÃ¶net</h2>
    <div>
      <label for="panelSheetyLink">Sheety API Linki:</label>
      <input type="url" id="panelSheetyLink" placeholder="Sheety API linkini girin (Ã¶rn: https://api.sheety.co/...)">
    </div>
    <div>
      <label for="panelPageTitle">Sayfa BaÅŸlÄ±ÄŸÄ±:</label>
      <input type="text" id="panelPageTitle" placeholder="Sayfa baÅŸlÄ±ÄŸÄ±nÄ± girin">
    </div>
    <div>
      <label for="panelAsilCount">Asil KiÅŸi SayÄ±sÄ±:</label>
      <input type="number" id="panelAsilCount" value="20" min="0">
    </div>
    <div>
      <label for="panelTotalParticipants">GÃ¶sterilecek Toplam KiÅŸi SayÄ±sÄ±:</label>
      <input type="number" id="panelTotalParticipants" value="30" min="0">
    </div>
    <div>
      <label for="panelExplanation">AÃ§Ä±klama Metni:</label>
      <textarea id="panelExplanation" placeholder="AÃ§Ä±klama metnini buraya girin"></textarea>
    </div>
    <button id="saveSettings" class="save-button">AyarlarÄ± Kaydet</button>
    <div id="message"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    // Panel elementlerini al
    const adminPanel = document.getElementById("adminPanel");
    const panelSheetyLink = document.getElementById("panelSheetyLink");
    const panelPageTitle = document.getElementById("panelPageTitle");
    const panelAsilCount = document.getElementById("panelAsilCount");
    const panelTotalParticipants = document.getElementById("panelTotalParticipants");
    const panelExplanation = document.getElementById("panelExplanation");
    const saveSettingsButton = document.getElementById("saveSettings");

    // VarsayÄ±lan ayarlar
    const defaultSettings = {
        sheetyLink: "https://api.sheety.co/0ba8ac5c826c01778820b2e0aabcff98/ankaraGezisiKayÄ±tFormu/ankaraGezisiKayÄ±tFormu",
        pageTitle: "ğŸšŒ Ankara Gezisi KatÄ±lÄ±mcÄ± Listesi",
        asilCount: 20,
        totalParticipantsToShow: 30,
        explanation: "Bu liste, Ankara gezisi iÃ§in yapÄ±lan baÅŸvurular arasÄ±ndan belirlenen asil ve yedek katÄ±lÄ±mcÄ±larÄ± gÃ¶stermektedir. Asil listedeki katÄ±lÄ±mcÄ±larÄ±n geziye katÄ±lÄ±mÄ± kesinleÅŸmiÅŸtir. Yedek listedeki katÄ±lÄ±mcÄ±lar, asil listeden boÅŸ yer kalmasÄ± durumunda sÄ±rayla davet edilecektir."
    };

    // localStorage'dan mevcut ayarlarÄ± yÃ¼kle ve panele yansÄ±t
    function loadSettingsIntoPanel() {
        let settings = {};
        try {
            const storedSettings = localStorage.getItem('listPageSettings');
            if (storedSettings) {
                settings = JSON.parse(storedSettings);
            } else {
                settings = defaultSettings;
            }
        } catch (e) {
            console.error("localStorage'dan ayarlar yÃ¼klenirken hata oluÅŸtu, varsayÄ±lanlar kullanÄ±lacak.", e);
            settings = defaultSettings;
        }

        panelSheetyLink.value = settings.sheetyLink;
        panelPageTitle.value = settings.pageTitle;
        panelAsilCount.value = settings.asilCount;
        panelTotalParticipants.value = settings.totalParticipantsToShow;
        panelExplanation.value = settings.explanation;
    }

    // AyarlarÄ± localStorage'a kaydet
    function saveSettings() {
        const settingsToSave = {
            sheetyLink: panelSheetyLink.value,
            pageTitle: panelPageTitle.value,
            asilCount: parseInt(panelAsilCount.value) || 0,
            totalParticipantsToShow: parseInt(panelTotalParticipants.value) || 0,
            explanation: panelExplanation.value
        };

        try {
            localStorage.setItem('listPageSettings', JSON.stringify(settingsToSave));
            Swal.fire({
                position: "center",
                icon: "success",
                title: "Ayarlar baÅŸarÄ±yla kaydedildi!",
                html: "Listeleme sayfasÄ±nÄ± yenileyerek deÄŸiÅŸiklikleri gÃ¶rebilirsiniz.",
                showConfirmButton: false,
                timer: 1500,
            });
        } catch (e) {
            Swal.fire({
                position: "center",
                icon: "error",
                title: "Hata!",
                text: "Ayarlar kaydedilirken bir sorun oluÅŸtu. Konsolu kontrol edin.",
                showConfirmButton: true,
            });
            console.error("Ayarlar localStorage'a kaydedilirken hata oluÅŸtu:", e);
        }
    }

    // "AyarlarÄ± Kaydet" butonuna tÄ±klanÄ±nca kaydet
    saveSettingsButton.addEventListener("click", saveSettings);

    // Sayfa yÃ¼klendiÄŸinde ayarlarÄ± panele yÃ¼kle
    loadSettingsIntoPanel();

    // Paneli baÅŸlangÄ±Ã§ta gizle (eÄŸer bu satÄ±rÄ± kaldÄ±rÄ±rsanÄ±z, admin.html aÃ§Ä±ldÄ±ÄŸÄ±nda panel direkt gÃ¶rÃ¼nÃ¼r.)
    adminPanel.style.display = "block"; // <-- Panelin admin.html'de varsayÄ±lan olarak gÃ¶rÃ¼nÃ¼r olmasÄ±nÄ± istiyorsanÄ±z 'block' yapÄ±n.
                                         // Gizli olmasÄ±nÄ± istiyorsanÄ±z 'none' yapÄ±n veya bu satÄ±rÄ± kaldÄ±rÄ±n ve CSS'teki 'display: none;' kalsÄ±n.
  </script>

</body>
</html>